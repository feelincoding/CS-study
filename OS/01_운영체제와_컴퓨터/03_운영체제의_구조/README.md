# 03_운영체제의 구조

## 커널과 인터페이스
- 커널: 프로세스 관리, 메모리 관리, 저장장치 관리와 같은 운영체제의 핵심적인 기능을 모아놓은 것.
    - 자동차의 엔진 역할로 운영체제의 성능은 커널에 좌우된다.
- 인터페이스: 커널에 사용자의 명령을 전달하고 실행결과를 사용자에게 알려주는 역할
## 시스템 호출과 디바이스 드라이버
- 시스템 호출: 커널이 자신을 보호가기 위해 만든 인터페이스
    - 응용프로그램과 커널의 인터페이스
- 커피머신이라 생각하자
    - 사용자가 직접 뽑아서 먹다가 고장낼 수도 더럽힐 수도 있는데 맛이 이상할 수도
        - -> 직접 접근
        - 데이터 날려먹을 수도 있겠지, 내가 아니면 남이
    - 알바한테 달라하면 깔끔하게 나온다.
        - -> 시스템 호출을 통한 접근
        - 어떻게 저장되는지는 모르지만 `어쨋든 알아서 해줘`
- API, SDK
    - API: 응용프로그램이 자신과 연관된 프로그램을 만들 수 있도록 제공하는 인터페이스, ***예) 포토샵***
    - SDK: 프로그램 개발자를 위해 API, API 메뉴얼, 코드편집기, 시뮬레이터 등 하나로 묶어서 배포하는 개발 툴, ***예) 안드로이드 스튜디오***

- 드라이버: 커널과 하드웨어의 인터페이스
    - 마우스, 키보드 같은 복잡하지 않은 디바이스는 이미 디바이스 드라이버가 커널에 포함되어 있다
    - 그래픽카드, 프린터 같은 복잡한 디바이스 드라이버는 사용자가 직접 설치해야한다.
## 커널의 구성
- 프로세스 관리: 프로세스에 CPU를 배분하고 작업에 필요한 제반 환경을 제공
- 메모리 관리: 프로세스에 작업 공간을 배치하고 실제 메모리보다 큰 가상공간을 제공
- 파일 시스템 관리: 데이터를 저장하고 접근할 수 있는 인터페이스를 제공
- 입출력 관리: 필요한 입력과 출력 서비스를 제공
- 프로세스 간 통신 관리: 공동 작업을 위한 각 프로세스 간 통신 환경을 지원
- **`단일형 구조 커널`**: 초기의 운영체제, 모듈분리 X
    - main()에 다 구현한거와 비슷
    - 분리 안됐으니 통신비용 줄고 효율적 운영 가능
    - 대신 싹 묶었으니까 버그 처리 어렵지
    - 서로 의존적으로 한 곳에 있으니 조그만한 결함이 전체 결함 될지도
    - 이렇게 수정이 어려우면 다양한 환경에 적용 어렵
    - 현대에는 안맞아
- **`계층형 구조 커널`**
    - 비슷한 기능을 가진 모듈을 묶어서 하나의 계층으로 만들고
    - 계층 간의 통신을 통해 운영체제를 구현
    - 모듈화 했으니 그나마 버그처리 쉽고, 수정, 디버깅 쉽고
    - 윈도우를 비롯해서 오늘날 보통 이 구조
- **`마이크로 구조 커널`**
    - 계속 사용자 요구가 늘어, 막 추가하고, 커지고, 오류잡기 어려워져
    - 가장 기본적인 기능만 제공하며, 다른 커널에 비해 사용자 영역에 많은 부분 구현
    - 각 모듈이 독립적으로 작동
    - iOS의 커널
- 가상 머신
    - 운영체제 위에 가상머신을 만들고 그 위에서 응용 프로그램이 작동하게 하는 것
    - 응용 프로그램이 모두 동일한 환경에서 작동하는 것 처럼 보임!
    - 대신 응용 프로그램은 가상머신을 통해서만 작동하니까 느려져!